# RC Model

This repository has been created to reproduce the experiments for the RC Model, an open source processor 
temperature prediction model. The RC Model has been integrated into OpenDC, a discrete event simulator for data centers
allowing us to leverage the simulator's capabilities to evaluate the model's performance.

## Getting Started
To run the RC Model simulation using OpenDC, follow the steps below:
- Clone this repository to your local machine.
- Install the required dependencies by running `pip install -r requirements.txt`.
- Run the `run_opendc.py` script to execute the simulation.
- The script will load the input data, set up the simulation environment, and run the RC Model simulation by using a distribution of OpenDC included in the `OpenDC` directory.
- After the simulation is complete, the script will generate plots to visualize the results and calculate the Mean Absolute Percentage Error (MAPE) for the predicted temperatures.
- The results from OpenDC and the plots from the scripts will be saved in the `Output` directory.


## Description of Scripts
This repository includes several scripts to facilitate running simulations and analyzing results with the RC Model integrated into OpenDC. Below is a brief overview of each script and its functionality:

`rcmodel.py`:
- This script contains the main code to run the RC Model simulation using OpenDC. 
- It initializes the model, sets up the necessary parameters, and executes the simulation with the provided input data. 
- After the simulation, it collects the results and prepares them for analysis and visualization.

`mape.py`:
- This script calculates the Mean Absolute Percentage Error (MAPE) for the predicted temperatures.
- It takes the actual and predicted temperature values as input and computes the MAPE to evaluate the accuracy of the predictions.

`plotting.py`:

- This script generates various plots to visualize the results of the simulation.
- It includes functions to plot the predicted vs. actual temperatures, as well as histograms of the error distributions between the predicted and actual temperatures and power draw values.
- These visualizations help in analyzing the performance of the RC Model.

`run_opendc.py`:

- This script serves as a wrapper to run the OpenDC simulation with the RC Model.
- It sets up the simulation environment, loads the necessary input files, and executes the simulation.
- It ensures that the simulation runs smoothly and handles any intermediate steps required for a successful execution.


## Data
The data required to run the simulation is stored in the `input` directory. This directory contains the following 
directories and files:
- `M100_input`: This directory contains the input data from the M100 supercomputer, which is used for plotting.
- `scenarios`: This scenario file is used to inform OpenDC on where the topologies are located for the 6 different 
nodes, thus defining 6 different scenarios.
- `topologies`: This directory contains the topology used in the simulation.
- `traces`: This directory contains the traces from the 6 nodes used in the simulation, with each node containing 
two different files.

## Output
- The output directory contains the results of the simulation, including the plots generated by the `plotting.py` script and the MAPE calculated by the `mape.py` script.
- The plots provide visualizations of the predicted vs. actual temperatures, error distributions of temperature and power draw values.
- The MAPE value indicates the accuracy of the temperature predictions made by the RC Model.
